"use strict";(self.webpackChunkapplitools_playwright_docs=self.webpackChunkapplitools_playwright_docs||[]).push([[5783],{9580:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var i=s(4848),l=s(8453);const a={},t="Handling Failures in Visual Tests",r={id:"guides/handling-failures",title:"Handling Failures in Visual Tests",description:"Visual test failures can occur for various reasons, from legitimate UI changes to environmental issues. This guide will help you effectively manage and respond to failures in your Applitools Eyes tests with Playwright.",source:"@site/docs/guides/handling-failures.md",sourceDirName:"guides",slug:"/guides/handling-failures",permalink:"/applitools-playwright-docs/docs/guides/handling-failures",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Maintaining Visual Tests",permalink:"/applitools-playwright-docs/docs/guides/maintaining-tests"},next:{title:"Scaling Visual Testing",permalink:"/applitools-playwright-docs/docs/guides/scaling-visual-testing"}},o={},d=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Understanding Types of Failures",id:"understanding-types-of-failures",level:2},{value:"Analyzing Failed Tests",id:"analyzing-failed-tests",level:2},{value:"Responding to Different Failure Scenarios",id:"responding-to-different-failure-scenarios",level:2},{value:"1. Intended Changes",id:"1-intended-changes",level:3},{value:"2. Unintended Regressions",id:"2-unintended-regressions",level:3},{value:"3. Environmental Issues",id:"3-environmental-issues",level:3},{value:"4. Dynamic Content",id:"4-dynamic-content",level:3},{value:"Updating Baselines",id:"updating-baselines",level:2},{value:"Handling False Positives",id:"handling-false-positives",level:2},{value:"Debugging Failures",id:"debugging-failures",level:2},{value:"Communicating and Collaborating on Failures",id:"communicating-and-collaborating-on-failures",level:2},{value:"Best Practices",id:"best-practices",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"handling-failures-in-visual-tests",children:"Handling Failures in Visual Tests"})}),"\n",(0,i.jsx)(n.p,{children:"Visual test failures can occur for various reasons, from legitimate UI changes to environmental issues. This guide will help you effectively manage and respond to failures in your Applitools Eyes tests with Playwright."}),"\n",(0,i.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#understanding-types-of-failures",children:"Understanding Types of Failures"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#analyzing-failed-tests",children:"Analyzing Failed Tests"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#responding-to-different-failure-scenarios",children:"Responding to Different Failure Scenarios"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updating-baselines",children:"Updating Baselines"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#handling-false-positives",children:"Handling False Positives"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#debugging-failures",children:"Debugging Failures"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#communicating-and-collaborating-on-failures",children:"Communicating and Collaborating on Failures"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#best-practices",children:"Best Practices"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"understanding-types-of-failures",children:"Understanding Types of Failures"}),"\n",(0,i.jsx)(n.p,{children:"Visual test failures generally fall into these categories:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Intended Changes"}),": Legitimate UI updates that need baseline updates."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unintended Regressions"}),": Actual bugs that need to be fixed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Environmental Issues"}),": Problems with test execution, not the application."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Dynamic Content"}),": Failures due to content that changes between test runs."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"analyzing-failed-tests",children:"Analyzing Failed Tests"}),"\n",(0,i.jsx)(n.p,{children:"When a test fails:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Open the Applitools dashboard"}),"\n",(0,i.jsx)(n.li,{children:"Review the differences highlighted in the comparison view"}),"\n",(0,i.jsx)(n.li,{children:"Use the various comparison tools (slider, side-by-side, etc.) to understand the changes"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"test('Analyze homepage layout', async ({ page }) => {\n  await eyes.open(page, 'MyApp', 'Homepage Test');\n  await page.goto('/');\n  await eyes.check('Full page', Target.window().fully());\n  await eyes.close();\n  // If this test fails, analyze the results in the Applitools dashboard\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"responding-to-different-failure-scenarios",children:"Responding to Different Failure Scenarios"}),"\n",(0,i.jsx)(n.h3,{id:"1-intended-changes",children:"1. Intended Changes"}),"\n",(0,i.jsx)(n.p,{children:"If the change is intended:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Update the baseline in the Applitools dashboard"}),"\n",(0,i.jsx)(n.li,{children:"Consider updating your test script if the UI structure has changed significantly"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-unintended-regressions",children:"2. Unintended Regressions"}),"\n",(0,i.jsx)(n.p,{children:"If you've found a bug:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Report the issue to the development team"}),"\n",(0,i.jsx)(n.li,{children:"Provide screenshots and steps to reproduce from the Applitools dashboard"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-environmental-issues",children:"3. Environmental Issues"}),"\n",(0,i.jsx)(n.p,{children:"For test environment problems:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Check your test setup and execution environment"}),"\n",(0,i.jsx)(n.li,{children:"Ensure consistent browser versions and viewport sizes"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Ensure consistent viewport size\ntest.beforeEach(async ({ page }) => {\n  await page.setViewportSize({ width: 1280, height: 720 });\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-dynamic-content",children:"4. Dynamic Content"}),"\n",(0,i.jsx)(n.p,{children:"To handle dynamic content:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use layout matching instead of strict matching"}),"\n",(0,i.jsx)(n.li,{children:"Implement ignore regions for highly dynamic areas"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"await eyes.check('Dynamic page', Target.window().fully().layout());\n\n// or\n\nawait eyes.check('Page with ads', Target.window().fully().ignoreRegions('#ad-container'));\n"})}),"\n",(0,i.jsx)(n.h2,{id:"updating-baselines",children:"Updating Baselines"}),"\n",(0,i.jsx)(n.p,{children:"When you need to update baselines:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"In the Applitools dashboard, review the changes"}),"\n",(0,i.jsx)(n.li,{children:'If the new version is correct, click "Accept" to update the baseline'}),"\n",(0,i.jsx)(n.li,{children:"Consider batch updates for widespread changes"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Run tests with baseline update flag\n// This can be set as an environment variable in your CI/CD pipeline\nprocess.env.APPLITOOLS_UPDATE_BASELINE = true;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"handling-false-positives",children:"Handling False Positives"}),"\n",(0,i.jsx)(n.p,{children:"To reduce false positives:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Use smart match levels"}),"\n",(0,i.jsx)(n.li,{children:"Implement ignore regions for irrelevant elements"}),"\n",(0,i.jsx)(n.li,{children:"Adjust match settings for specific checks"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"await eyes.check('Flexible match', Target.window().fully().strict()\n  .ignoreRegions('#dynamic-content')\n  .layout('#semi-dynamic-region')\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"debugging-failures",children:"Debugging Failures"}),"\n",(0,i.jsx)(n.p,{children:"For hard-to-diagnose issues:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Use Applitools' built-in debugging tools"}),"\n",(0,i.jsx)(n.li,{children:"Leverage Playwright's tracing feature"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Enable Playwright tracing\nawait context.tracing.start({ screenshots: true, snapshots: true });\nawait eyes.open(page, 'MyApp', 'Debug Test');\n// ... your test steps ...\nawait eyes.close();\nawait context.tracing.stop({ path: 'trace.zip' });\n"})}),"\n",(0,i.jsx)(n.h2,{id:"communicating-and-collaborating-on-failures",children:"Communicating and Collaborating on Failures"}),"\n",(0,i.jsx)(n.p,{children:"Effective communication is key:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Use Applitools' team collaboration features"}),"\n",(0,i.jsx)(n.li,{children:"Integrate with issue tracking systems"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Example of adding custom properties for better tracking\nawait eyes.addProperty('Jira Ticket', 'PROJ-123');\nawait eyes.addProperty('Developer', 'johndoe');\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Triage Quickly"}),": Address failures promptly to prevent backlog"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Consistent Environments"}),": Ensure test environments match production as closely as possible"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Version Control"}),": Keep test scripts and baselines in sync with your application code"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Regular Maintenance"}),": Schedule routine baseline reviews and updates"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Smart Grouping"}),": Use batch naming conventions to group related tests"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"eyes.setBatch({\n  name: 'Release 2.0 - Homepage Redesign',\n  id: 'release-2.0'  // Custom batch ID\n});\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Detailed Logging"}),": Implement comprehensive logging for easier debugging"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"eyes.setLogHandler(new ConsoleLogHandler(true));\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Failure Thresholds"}),": Implement thresholds for acceptable levels of difference"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"await eyes.check('Slight differences allowed', Target.window().fully()\n  .withName('Fuzzy match')\n  .layoutBreakpoints(true)\n);\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Automated Baseline Updates"}),": For non-critical changes, consider automating baseline updates in your CI/CD pipeline"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"By following these guidelines and best practices, you can effectively manage visual test failures, reduce false positives, and maintain a robust visual testing process that provides valuable insights into your application's UI integrity."})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>r});var i=s(6540);const l={},a=i.createContext(l);function t(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);